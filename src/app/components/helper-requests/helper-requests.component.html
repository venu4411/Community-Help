<div class="page">

  <!-- SIDE MENU -->
  <aside class="side-menu">
    <h3 class="menu-title">MENU</h3>

    <button class="menu-item" routerLink="/profile">ğŸ  Dashboard</button>
    <button class="menu-item" routerLink="/calendar">ğŸ“… Calendar</button>
    
    <button class="menu-item active">ğŸ“Š Task Request</button>
    <button class="menu-item">ğŸ‘¥ Chat</button>  
    <button class="menu-item back-btn" (click)="goBack()">â¬… Back</button>
  </aside>

  <!-- MAIN CONTENT -->
  <div class="content">
    <h1 class="page-title">Pending Help Requests</h1>

    <p class="empty" *ngIf="!tasks.length">No pending requests</p>

    <div class="task-grid">
      <div class="profile-card" *ngFor="let t of tasks">

        <h3 class="task-title">{{ t.username }}</h3>

        <div class="task-info">
          <p><span>Date</span><b>{{ t.calendar | date:'dd/MM/yyyy' }}</b></p>
          <p><span>Time</span><b>{{ t.time }}</b></p>
          <p><span>Location</span><b>{{ t.location }}</b></p>
          <p><span>Payment</span><b>{{ t.payment_method }}</b></p>
          <p><span>Amount</span><b>â‚¹{{ t.amount }}</b></p>
          <p><span>Status</span><b>{{ t.task_status }}</b></p>
        </div>

        <button
          class="complete-btn"
          [disabled]="t.task_status !== 'pending'"
          (click)="acceptTask(t.id)"
        >
          {{
            t.task_status === 'pending'
              ? 'Accept â†’'
              : t.task_status === 'in_progress'
                ? 'In Progress'
                : 'Completed'
          }}
        </button>

      </div>
    </div>
  </div>
</div>
